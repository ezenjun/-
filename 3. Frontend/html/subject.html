<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>수강신청(국/수)</title>
	</head>

	<body>
		<div>
			<button id="btnKor">국어수업 요일 선택 &gt;</button>
			<label id="kor">요일을 선택하세요!</label>
		</div>
		<div style="margin-top: 1rem">
			<button id="btnMath" onclick="throttleSetweek('Math')">
				수학수업 요일 선택 &gt;
			</button>
			<label id="math">요일을 선택하세요!</label>
		</div>
		<div style="margin-top: 2rem">
			<input type="text" id="search" onchange="(e) => debounceSearch(e)" />
			<span></span>
		</div>

		<script>
			const WEEKS = '일월화수목금토';
			const setWeek = (subject) => {
				// console.log('setWeek!!', subject);
				// const nextWeekFn = subject === 'math' ? mathWeek : korWeek;
				document.getElementById(subject).innerText =
					nextWeekFunction[subject]();
			};
			const debounce = (cb, delay = 1000) => {
				let timer;
				return (...args) => {
					if (timer) clearTimeout(timer);
					timer = setTimeout(cb, delay, ...args);
				};
			};

			const throttle = (cb, delay) => {
				let timer;
				return (...args) => {
					if (timer) return;
					timer = setTimeout(() => {
						cb(...args);
						timer = null;
					}, delay);
				};
			};

			const throttleSetweek = throttle(setWeek, 500);

			const getNextWeek = () => {
				let widx = -1;
				return () => {
					widx += 1;
					if (widx >= WEEKS.length) widx = 0;
					return `${WEEKS[widx]}요일`;
				};
			};

			const nextWeekFunction = {
				kor: getNextWeek(),
				math: getNextWeek(),
			};

			const debounceSearch = debounce((e) => {
				console.log('', e.target.value, e);
			}, 500);

			window.addEventListener('load', () => {
				const fnKor = debounce(() => {
					setWeek('kor');
				}, 500);
				document
					.getElementById('btnKor')
					.addEventListener('click', () => fnKor());
				document
					.getElementById('search')
					.addEventListener('keyup', debounceSearch);
			});

			// const testing = () => {
			// 	let runCnt = 0;
			// 	const subjects = ['Kor', 'Math'];
			// 	const intl = setInterval(() => {
			// 		runCnt += 1;
			// 		if (runCnt > 20) clearInterval(intl);
			// 		document.getElementById(`btn${subjects[runCnt % 2]}`).click();
			// 		// if (runCnt % 2 === 0)
			// 		//   document.getElementById('btnKor').click();
			// 		// else
			// 		//   document.getElementById('btnMath').click();
			// 	}, 200);
			// };

			// test code
		</script>
	</body>
</html>
